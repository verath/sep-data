use super::*;

#[test]
fn test_parse_packet_capture_sep_default_license_all_output() {
    let packet = include_bytes!("../../assets/captures/SEP_DEFAULT_LICENSE_ALL_OUTPUT.bin");
    assert_eq!(
        parse_packet(packet),
        Ok(vec![
            SEOutputData::SEFrameNumber(41589),
            SEOutputData::SEEstimatedDelay(314802991),
            SEOutputData::SETimeStamp(8462866257),
            SEOutputData::SEUserTimeStamp(1209386960028),
            SEOutputData::SEFrameRate(59.93449160068045),
            SEOutputData::SECameraPositions(vec![
                SEVectorItem::Point3D(Point3D(
                    0.2682732323511141,
                    -0.1777000457370971,
                    0.5269263822146691
                )),
                SEVectorItem::Point3D(Point3D(
                    -0.2036303979326044,
                    -0.2203994197774216,
                    0.5508584634972726
                )),
            ]),
            SEOutputData::SECameraRotations(vec![
                SEVectorItem::Vect3D(Vect3D(
                    0.03267817500465463,
                    -2.71408382961214,
                    -0.435073317650532
                )),
                SEVectorItem::Vect3D(Vect3D(
                    -0.21844621393584612,
                    2.7705830610104574,
                    0.49179606893058253
                ))
            ]),
            SEOutputData::SERealTimeClock(0),
            SEOutputData::SEKeyboardState(String::from("")),
            SEOutputData::SEASCIIKeyboardState(0),
            SEOutputData::SECameraClocks(vec![SEVectorItem::U64(0), SEVectorItem::U64(0)]),
            SEOutputData::SEHeadPosition(Point3D(
                0.01101574730845854,
                -0.01858878199141117,
                -0.0929561356545404
            )),
            SEOutputData::SEHeadPositionQ(1.0),
            SEOutputData::SEHeadRotationRodrigues(Vect3D(
                0.07115166495145656,
                0.03637491779238788,
                0.06522747468743814
            )),
            SEOutputData::SEHeadRotationQuaternion(Quaternion(
                0.9986702551176382,
                0.03556006215031871,
                0.018179396621182897,
                0.032599280078352666
            )),
            SEOutputData::SEHeadLeftEarDirection(Vect3D(
                0.9972135929537257,
                0.06640478365240872,
                -0.033991980471839156
            )),
            SEOutputData::SEHeadUpDirection(Vect3D(
                -0.06381894175759047,
                0.9953455378364772,
                0.07221082316353453
            )),
            SEOutputData::SEHeadNoseDirection(Vect3D(
                0.03862891017440666,
                -0.06984028219509691,
                0.9968099830367103
            )),
            SEOutputData::SEHeadHeading(-0.03873314988418669),
            SEOutputData::SEHeadPitch(-0.06989718342932053),
            SEOutputData::SEHeadRoll(0.06661658925475884),
            SEOutputData::SEHeadRotationQ(1.0),
            SEOutputData::SEGazeOrigin(Point3D(
                0.010596821647752476,
                0.019287149600542904,
                -0.025716669734777767
            )),
            SEOutputData::SELeftGazeOrigin(Point3D(
                0.04316651992888525,
                0.02354035304692958,
                -0.015301366974527802
            )),
            SEOutputData::SERightGazeOrigin(Point3D(
                -0.015778004264873146,
                0.018510110089395727,
                -0.012254321323911258
            )),
            SEOutputData::SEEyePosition(Point3D(
                0.010596821647752476,
                0.019287149600542904,
                -0.025716669734777767
            )),
            SEOutputData::SEGazeDirection(Vect3D(
                0.24844170579358535,
                0.15914449018202537,
                0.9554840396715567
            )),
            SEOutputData::SEGazeDirectionQ(0.49393351891912857),
            SEOutputData::SELeftEyePosition(Point3D(
                0.040370618535565436,
                0.021840473127460017,
                -0.027323984978033386
            )),
            SEOutputData::SELeftGazeDirection(Vect3D(
                0.17774102856070295,
                0.15326988747082065,
                0.9720681397725498
            )),
            SEOutputData::SELeftGazeDirectionQ(0.4751789967801069),
            SEOutputData::SERightEyePosition(Point3D(
                -0.019176975240060484,
                0.01673382607362579,
                -0.02410935449152215
            )),
            SEOutputData::SERightGazeDirection(Vect3D(
                0.3145432979391525,
                0.16474226433350114,
                0.9348382213323502
            )),
            SEOutputData::SERightGazeDirectionQ(0.5126880410581502),
            SEOutputData::SEGazeHeading(-0.25438360193843035),
            SEOutputData::SEGazePitch(0.1598240385272951),
            SEOutputData::SELeftGazeHeading(-0.180850494730415),
            SEOutputData::SELeftGazePitch(0.1538764153338982),
            SEOutputData::SERightGazeHeading(-0.3245692417404205),
            SEOutputData::SERightGazePitch(0.16549669962232527),
            SEOutputData::SEFilteredGazeDirection(Vect3D(
                0.24734941372437724,
                0.16100279691773647,
                0.955456104127695
            )),
            SEOutputData::SEFilteredGazeDirectionQ(0.4793776721707107),
            SEOutputData::SEFilteredLeftGazeDirection(Vect3D(
                0.17898995853833527,
                0.15530617710607195,
                0.9715156128931446
            )),
            SEOutputData::SEFilteredLeftGazeDirectionQ(0.4555639769209772),
            SEOutputData::SEFilteredRightGazeDirection(Vect3D(
                0.311174702653152,
                0.1665117796171611,
                0.9356517149438932
            )),
            SEOutputData::SEFilteredRightGazeDirectionQ(0.5031913674204441),
            SEOutputData::SEFilteredGazeHeading(-0.2533196102236898),
            SEOutputData::SEFilteredGazePitch(0.16170662132346797),
            SEOutputData::SEFilteredLeftGazeHeading(-0.18219474799903213),
            SEOutputData::SEFilteredLeftGazePitch(0.15593738357061254),
            SEOutputData::SEFilteredRightGazeHeading(-0.3210682201904631),
            SEOutputData::SEFilteredRightGazePitch(0.16729099716577192),
            SEOutputData::SESaccade(0),
            SEOutputData::SEFixation(6),
            SEOutputData::SEBlink(0),
            SEOutputData::SELeftBlinkClosingMidTime(0),
            SEOutputData::SELeftBlinkOpeningMidTime(0),
            SEOutputData::SELeftBlinkClosingAmplitude(0.0),
            SEOutputData::SELeftBlinkOpeningAmplitude(0.0),
            SEOutputData::SELeftBlinkClosingSpeed(0.0),
            SEOutputData::SELeftBlinkOpeningSpeed(0.0),
            SEOutputData::SERightBlinkClosingMidTime(0),
            SEOutputData::SERightBlinkOpeningMidTime(0),
            SEOutputData::SERightBlinkClosingAmplitude(0.0),
            SEOutputData::SERightBlinkOpeningAmplitude(0.0),
            SEOutputData::SERightBlinkClosingSpeed(0.0),
            SEOutputData::SERightBlinkOpeningSpeed(0.0),
            SEOutputData::SEClosestWorldIntersection(None),
            SEOutputData::SEFilteredClosestWorldIntersection(None),
            SEOutputData::SEAllWorldIntersections(vec![]),
            SEOutputData::SEFilteredAllWorldIntersections(vec![]),
            SEOutputData::SEZoneId(65535),
            SEOutputData::SEEstimatedClosestWorldIntersection(None),
            SEOutputData::SEEstimatedAllWorldIntersections(vec![]),
            SEOutputData::SEHeadClosestWorldIntersection(Some(WorldIntersection {
                world_point: Point3D(
                    0.03372024574292476,
                    -0.059638052359174465,
                    0.49292813074425806
                ),
                object_point: Point3D(0.49132590554102507, 0.456412577319131, 0.0),
                object_name: String::from("ScreenCS.Screen")
            })),
            SEOutputData::SEHeadAllWorldIntersections(vec![WorldIntersection {
                world_point: Point3D(
                    0.03372024574292476,
                    -0.059638052359174465,
                    0.49292813074425806
                ),
                object_point: Point3D(0.49132590554102507, 0.456412577319131, 0.0),
                object_name: String::from("ScreenCS.Screen")
            }]),
            SEOutputData::SECalibrationGazeIntersection(None),
            SEOutputData::SETaggedGazeIntersection(None),
            SEOutputData::SELeftClosestWorldIntersection(None),
            SEOutputData::SELeftAllWorldIntersections(vec![]),
            SEOutputData::SERightClosestWorldIntersection(None),
            SEOutputData::SERightAllWorldIntersections(vec![]),
            SEOutputData::SEFilteredLeftClosestWorldIntersection(None),
            SEOutputData::SEFilteredLeftAllWorldIntersections(vec![]),
            SEOutputData::SEFilteredRightClosestWorldIntersection(None),
            SEOutputData::SEFilteredRightAllWorldIntersections(vec![]),
            SEOutputData::SEEstimatedLeftClosestWorldIntersection(None),
            SEOutputData::SEEstimatedLeftAllWorldIntersections(vec![]),
            SEOutputData::SEEstimatedRightClosestWorldIntersection(None),
            SEOutputData::SEEstimatedRightAllWorldIntersections(vec![]),
            SEOutputData::SEEyelidOpening(0.011918711547239901),
            SEOutputData::SEEyelidOpeningQ(1.0),
            SEOutputData::SELeftEyelidOpening(0.012134439339411301),
            SEOutputData::SELeftEyelidOpeningQ(1.0),
            SEOutputData::SERightEyelidOpening(0.0117029837550685),
            SEOutputData::SERightEyelidOpeningQ(1.0),
            SEOutputData::SELeftEyelidState(1),
            SEOutputData::SERightEyelidState(1),
            SEOutputData::SEPupilDiameter(0.0028586527495785196),
            SEOutputData::SEPupilDiameterQ(0.963893762893147),
            SEOutputData::SELeftPupilDiameter(0.00298722684390442),
            SEOutputData::SELeftPupilDiameterQ(0.839503836300638),
            SEOutputData::SERightPupilDiameter(0.002730078655252619),
            SEOutputData::SERightPupilDiameterQ(0.963893762893147),
            SEOutputData::SEFilteredPupilDiameter(0.0029366411394292032),
            SEOutputData::SEFilteredPupilDiameterQ(0.9605522534509281),
            SEOutputData::SEFilteredLeftPupilDiameter(0.0030490828664454044),
            SEOutputData::SEFilteredLeftPupilDiameterQ(0.8477530151973536),
            SEOutputData::SEFilteredRightPupilDiameter(0.0028240211614019377),
            SEOutputData::SEFilteredRightPupilDiameterQ(0.9605522534509281),
            SEOutputData::SEEstimatedGazeOrigin(Point3D(
                0.013771717675721239,
                0.01874882856111721,
                -0.008995069177403892
            )),
            SEOutputData::SEEstimatedLeftGazeOrigin(Point3D(
                0.042959807013571716,
                0.020885497957648103,
                -0.009762774182841716
            )),
            SEOutputData::SEEstimatedRightGazeOrigin(Point3D(
                -0.015416371662129238,
                0.016612159164586318,
                -0.008227364171966067
            )),
            SEOutputData::SEEstimatedEyePosition(Point3D(
                0.01070160149573338,
                0.019542192459590223,
                -0.02768166198586329
            )),
            SEOutputData::SEEstimatedGazeDirection(Vect3D(
                0.2647047972325157,
                0.18504339870528932,
                0.9464091667548915
            )),
            SEOutputData::SEEstimatedGazeDirectionQ(0.7940276265144348),
            SEOutputData::SEEstimatedGazeHeading(-0.2727247619560953),
            SEOutputData::SEEstimatedGazePitch(0.18611602350379386),
            SEOutputData::SEEstimatedLeftEyePosition(Point3D(
                0.04017391462295101,
                0.021504763558477923,
                -0.028686283562784368
            )),
            SEOutputData::SEEstimatedLeftGazeDirection(Vect3D(
                0.17311832108197756,
                0.21182729949379295,
                0.9618519855439944
            )),
            SEOutputData::SEEstimatedLeftGazeDirectionQ(0.7940276265144348),
            SEOutputData::SEEstimatedLeftGazeHeading(-0.17807779612162802),
            SEOutputData::SEEstimatedLeftGazePitch(0.2134443111820981),
            SEOutputData::SEEstimatedRightEyePosition(Point3D(
                -0.01877071163148425,
                0.017579621360702537,
                -0.026677040408942185
            )),
            SEOutputData::SEEstimatedRightGazeDirection(Vect3D(
                0.3538178874792526,
                0.15653046338951535,
                0.9221231569214507
            )),
            SEOutputData::SEEstimatedRightGazeDirectionQ(0.7940276265144348),
            SEOutputData::SEEstimatedRightGazeHeading(-0.36637544084271795),
            SEOutputData::SEEstimatedRightGazePitch(0.15717682840855654),
            SEOutputData::SEFilteredEstimatedGazeDirection(Vect3D(
                0.2615131565565539,
                0.18182330357952292,
                0.9479193822384139
            )),
            SEOutputData::SEFilteredEstimatedGazeDirectionQ(1.0),
            SEOutputData::SEFilteredEstimatedGazeHeading(-0.26918529031032745),
            SEOutputData::SEFilteredEstimatedGazePitch(0.18284034557245438),
            SEOutputData::SEFilteredEstimatedLeftGazeDirection(Vect3D(
                0.1691878652619489,
                0.20674317009784152,
                0.9636559177766718
            )),
            SEOutputData::SEFilteredEstimatedLeftGazeDirectionQ(0.7940276265144348),
            SEOutputData::SEFilteredEstimatedLeftGazeHeading(-0.17379746306330232),
            SEOutputData::SEFilteredEstimatedLeftGazePitch(0.20824503542202036),
            SEOutputData::SEFilteredEstimatedRightGazeDirection(Vect3D(
                0.35138215997557526,
                0.15519564391625662,
                0.9232794212806423
            )),
            SEOutputData::SEFilteredEstimatedRightGazeDirectionQ(0.7940276265144348),
            SEOutputData::SEFilteredEstimatedRightGazeHeading(-0.36365418016632733),
            SEOutputData::SEFilteredEstimatedRightGazePitch(0.15582549372422766)
        ])
    );
}
